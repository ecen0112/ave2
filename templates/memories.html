{% extends "base.html" %}
{% block title %}Memories - Our Journey{% endblock %}
{% block content %}
<h1 class="page-title">Memories</h1>

<div class="content-grid">
  <article class="card-3d">
    <div class="card-inner">
      <h3>Add Memory</h3>
      {% if session.get('role') == 'admin' %}
      <form method="post" class="stack">
        <textarea name="memory" rows="2" placeholder="A moment to remember..."></textarea>
        <button class="btn" type="submit">Add Memory</button>
      </form>
      {% else %}
        <p class="muted">Only admin can add memories.</p>
      {% endif %}
    </div>
  </article>

  <article class="card-3d" style="grid-column: 1 / -1;">
    <div class="card-inner">
      <h3>All Memories</h3>
      {% if memories %}
        <div class="stack">
          {% for m in memories %}
            <div class="memory-card">
              <div>{{ m }}</div>
              {% if session.get('role') == 'admin' %}
                <form method="post" action="{{ url_for('delete_memory', idx=loop.index0) }}" onsubmit="return confirm('Delete this memory?')">
                  <button class="btn" type="submit" style="margin-top:10px">Delete</button>
                </form>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="muted">No memories yet.</p>
      {% endif %}
    </div>
  </article>
</div>
{% endblock %}
