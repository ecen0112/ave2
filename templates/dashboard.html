{% extends "base.html" %}
{% block title %}Dashboard - Our Journey{% endblock %}
{% block content %}
<div class="dashboard-container">
  <h1 class="page-title">âœ¨ Welcome, {{ profile.name }} âœ¨</h1>

  <!-- Main Info Grid -->
  <div class="content-grid">
    <!-- About -->
    <article class="card-3d highlight-card">
      <div class="card-inner">
        <h3>ğŸ’ About Us</h3>
        <p class="bio-text">â€œ{{ profile.bio }}â€</p>
        <p class="muted">ğŸŒ¹ Together since <strong>{{ relationship_start }}</strong></p>
        <p class="muted">ğŸ’– {{ days_text }}</p>

        <!-- Relationship stats -->
        <div class="relationship-stats">
          <div class="stat-box">
            <h4>â¤ï¸ Days</h4>
            <p>{{ days_text.split(" ")[0] }}</p>
          </div>
          <div class="stat-box">
            <h4>ğŸ‰ Years</h4>
            <p>{{ (days_text.split(" ")[0]|int // 365) }}</p>
          </div>
        </div>

        <!-- Actions -->
        <div class="card-actions">
          <a class="btn primary-btn" href="{{ url_for('memories') }}">ğŸ“– View Memories</a>
          <a class="btn secondary-btn" href="{{ url_for('gallery') }}">ğŸ–¼ Open Gallery</a>
        </div>
      </div>
    </article>

    <!-- Next Anniversary -->
    <div class="card-3d">
      <div class="card-inner">
        <h3>ğŸ‚ Next Anniversary</h3>
        <div id="countdown" class="countdown">
          <span id="days">00</span>d :
          <span id="hours">00</span>h :
          <span id="minutes">00</span>m :
          <span id="seconds">00</span>s
        </div>
        <p class="muted">Counting down to your special day ğŸ’•</p>
        <div class="card-actions">
          <a class="btn" href="{{ url_for('ideas') }}">ğŸ’¡ Date Ideas</a>
        </div>
      </div>
    </div>

    <!-- Gallery -->
    <article class="card-3d">
      <div class="card-inner">
        <h3>ğŸ“¸ Recent Photos</h3>
        <div class="mini-gallery">
          {% if gallery %}
            {% for img in gallery %}
              <a href="{{ url_for('view_image', idx=loop.index0) }}">
                <img src="{{ url_for('static', filename='uploads/' + img.filename) }}" alt="{{ img.filename }}">
              </a>
            {% endfor %}
          {% else %}
            <p class="muted">No photos yet. Upload some in Gallery.</p>
          {% endif %}
        </div>
        <div class="card-actions">
          <a class="btn primary-btn" href="{{ url_for('gallery') }}">ğŸ–¼ Open Gallery</a>
        </div>
      </div>
    </article>
  </div>

  <!-- Games Section -->
  <section class="games-section">
    <h2>ğŸ® Fun & Games</h2>
    <div class="games-grid">
      <article class="card-3d">
        <div class="card-inner">
          <h3>ğŸ† Fireworks</h3>
          <p>Launch colorful fireworks on the screen!</p>
          <div class="card-actions">
            <a class="btn" href="{{ url_for('fireworks') }}">Watch Now</a>
          </div>
        </div>
      </article>
      <article class="card-3d">
        <div class="card-inner">
          <h3>ğŸ¦‹ Butterflies</h3>
          <p>Relax with floating, animated butterflies</p>
          <div class="card-actions">
            <a class="btn" href="{{ url_for('butterfly') }}">Watch Now</a>
          </div>
        </div>
      </article>
      <article class="card-3d">
        <div class="card-inner">
          <h3>ğŸ¹ Arrow Game</h3>
          <p>Test your reflexes with this fun arrow shooting game!</p>
          <div class="card-actions">
            <a class="btn" href="{{ url_for('arrow_game') }}">Play Now</a>
          </div>
        </div>
      </article>
      <article class="card-3d">
        <div class="card-inner">
          <h3>ğŸ Snake Game</h3>
          <p>Guide the snake to eat food and grow!</p>
          <div class="card-actions">
            <a class="btn" href="{{ url_for('snake_game') }}">Play Now</a>
          </div>
        </div>
      </article>
      <article class="card-3d">
        <div class="card-inner">
          <h3>ğŸ” Chicken Game</h3>
          <p>Try to dodge obstacles and score points!</p>
          <div class="card-actions">
            <a class="btn" href="{{ url_for('chicken_game') }}">Play Now</a>
          </div>
        </div>
      </article>
    </div>
  </section>
</div>

<script>
  function startCountdown() {
    const targetDate = new Date("2025-10-13T00:00:00").getTime();

    function updateCountdown() {
      const now = new Date().getTime();
      const diff = targetDate - now;

      if (diff <= 0) {
        document.getElementById("countdown").innerHTML = "ğŸ‰ It's Anniversary Day!";
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);

      document.getElementById("days").textContent = days.toString().padStart(2, '0');
      document.getElementById("hours").textContent = hours.toString().padStart(2, '0');
      document.getElementById("minutes").textContent = minutes.toString().padStart(2, '0');
      document.getElementById("seconds").textContent = seconds.toString().padStart(2, '0');
    }

    updateCountdown();
    setInterval(updateCountdown, 1000);
  }

  startCountdown();
</script>
{% endblock %}
